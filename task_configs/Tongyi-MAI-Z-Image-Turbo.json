{
  "app_id": "Tongyi-MAI-Z-Image-Turbo",
  "name": "å›¾åƒç”Ÿæˆ-Tongyi-MAI/Z-Image-Turbo",
  "description": "Z-Image æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€é«˜æ•ˆçš„å›¾åƒç”Ÿæˆæ¨¡å‹ï¼Œå…·æœ‰ 6B å‚æ•°ã€‚ç›®å‰æœ‰ä¸‰ä¸ªå˜ä½“ï¼š\nğŸš€ Z-Image-Turbo â€“ Z-Image çš„ç²¾ç®€ç‰ˆï¼Œä»…ç”¨ 8 NFEsï¼ˆå‡½æ•°è¯„ä¼°æ¬¡æ•°ï¼‰å°±èƒ½ä¸é¢†å…ˆç«äº‰å¯¹æ‰‹åŒ¹æ•Œæˆ–è¶…è¶Šã€‚å®ƒåœ¨ä¼ä¸šçº§ H800 GPU ä¸Šæä¾› âš¡ï¸äºšç§’çº§æ¨ç†å»¶è¿Ÿâš¡ï¸ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ 16G æ˜¾å­˜çš„æ¶ˆè´¹è®¾å¤‡ä¸Šè½»æ¾è¿è¡Œã€‚å®ƒæ“…é•¿ç”Ÿæˆé€¼çœŸçš„å›¾åƒã€åŒè¯­æ–‡æœ¬æ¸²æŸ“ï¼ˆè‹±æ–‡å’Œä¸­æ–‡ï¼‰ï¼Œå¹¶å…·æœ‰å¼ºå¤§çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ã€‚\nğŸ§± Z-Image-Base â€“ éç²¾ç®€çš„åŸºç¡€æ¨¡å‹ã€‚é€šè¿‡å‘å¸ƒæ­¤æ£€æŸ¥ç‚¹ï¼Œæˆ‘ä»¬æ—¨åœ¨è§£é”ç¤¾åŒºé©±åŠ¨çš„å¾®è°ƒå’Œè‡ªå®šä¹‰å¼€å‘çš„å…¨éƒ¨æ½œåŠ›ã€‚\nâœï¸ Z-Image-Edit â€“ ä¸“é—¨é’ˆå¯¹å›¾åƒç¼–è¾‘ä»»åŠ¡è¿›è¡Œå¾®è°ƒçš„ Z-Image å˜ä½“ã€‚å®ƒæ”¯æŒåˆ›æ„æ€§çš„å›¾åƒåˆ°å›¾åƒç”Ÿæˆï¼Œå¹¶å…·æœ‰ä»¤äººå°è±¡æ·±åˆ»çš„æŒ‡ä»¤è·Ÿéšèƒ½åŠ›ï¼Œå…è®¸æ ¹æ®è‡ªç„¶è¯­è¨€æç¤ºè¿›è¡Œç²¾ç¡®ç¼–è¾‘ã€‚",
  "author": "Kevin Wu",
  "homepage": "https://www.modelscope.cn/models/Tongyi-MAI/Z-Image-Turbo",
  "email": "wuk@qq.com",
  "inputs": [
    {
      "label": "æç¤ºè¯",
      "field_name": "prompt",
      "type": "textarea",
      "default_value": "ä¸€ä½ç™½å‘è€æ¸”å¤«åœ¨æ™¨é›¾å¼¥æ¼«çš„æ¸¯å£ä¿®è¡¥æ¸”ç½‘ï¼Œè„¸ä¸Šæ·±æ·±çš„çš±çº¹åœ¨æŸ”å’Œä¾§å…‰ä¸‹æ ¼å¤–æ¸…æ™°ï¼Œèº«ç©¿æ¹¿æ¼‰æ¼‰çš„æ©¡èƒ¶å›´è£™ï¼Œå†™å®è‚–åƒï¼Œç´¢å°¼A7R IVæ‹æ‘„ï¼Œf/1.8å¤§å…‰åœˆæµ…æ™¯æ·±ï¼Œè‡ªç„¶è‚¤è‰²è´¨æ„Ÿï¼Œé«˜æ¸…ç»†èŠ‚ã€‚",
      "editable": true,
      "required": true
    },
    {
      "label": "å›¾åƒå°ºå¯¸",
      "field_name": "resolution",
      "type": "select",
      "default_value": "1088*1920",
      "editable": true,
      "required": true,
      "options": [
        {
          "label": "ç«–ç‰ˆ-æ ‡å‡† (480Ã—832)",
          "value": "480*832"
        },
        {
          "label": "ç«–ç‰ˆ-é«˜æ¸… (720Ã—1280)",
          "value": "720*1280"
        },
        {
          "label": "ç«–ç‰ˆ-å…¨é«˜æ¸… (1088*1920)",
          "value": "1088*1920"
        },
        {
          "label": "ç«–ç‰ˆ-2K (1440Ã—2560)",
          "value": "1440*2560"
        },
        {
          "label": "ç«–ç‰ˆ-4K (2160Ã—3840)",
          "value": "2160*3840"
        },
        {
          "label": "æ¨ªç‰ˆ-æ ‡å‡† (832Ã—480)",
          "value": "832*480"
        },
        {
          "label": "æ¨ªç‰ˆ-é«˜æ¸… (1280Ã—720)",
          "value": "1280*720"
        },
        {
          "label": "æ¨ªç‰ˆ-å…¨é«˜æ¸… (1920*1088)",
          "value": "1920*1088"
        },
        {
          "label": "æ¨ªç‰ˆ-2K (2560Ã—1440)",
          "value": "2560*1440"
        },
        {
          "label": "æ¨ªç‰ˆ-4K (3840Ã—2160)",
          "value": "3840*2160"
        },
        {
          "label": "æ–¹å½¢-å° (512Ã—512)",
          "value": "512*512"
        },
        {
          "label": "æ–¹å½¢-æ ‡å‡† (768Ã—768)",
          "value": "768*768"
        },
        {
          "label": "æ–¹å½¢-å¤§ (1024Ã—1024)",
          "value": "1024*1024"
        },
        {
          "label": "æ¨ªå¹…- (1024Ã—96)",
          "value": "1024*96"
        },
        {
          "label": "æ¨ªå¹…- (1024Ã—192)",
          "value": "1024*192"
        }
      ]
    },
    {
      "label": "ç”Ÿæˆæ•°é‡",
      "field_name": "num",
      "type": "number",
      "default_value": 4,
      "editable": true,
      "required": true
    },
    {
      "label": "æ¨ç†æ­¥æ•°",
      "field_name": "steps",
      "type": "number",
      "default_value": 9,
      "editable": true,
      "required": true
    },
    {
      "label": "éšæœºæ•°ç§å­",
      "field_name": "seed",
      "type": "number",
      "default_value": "42",
      "editable": true,
      "required": true
    }
  ],
  "variables": {
    "work_dir": "/root/Tongyi-MAI-Z-Image-Turbo"
  },
  "server_output_file": "",
  "server_output_dir": "/tmp/Tongyi-MAI-Z-Image-Turbo_results",
  "model_path": "",
  "installs": [
    {
      "env_name": "Tongyi-MAI-Z-Image-Turbo",
      "python_version": "3.12",
      "cuda_version": "12.9",
      "commands": [
        "rm -rf {work_dir}",
        "mkdir -p {work_dir}",
        "mkdir -p {server_output_dir}",
        "conda install pytorch=2.9.* torchvision -c conda-forge -c pytorch -y",
        "pip install https://github.com/Dao-AILab/flash-attention/releases/download/v2.8.1/flash_attn-2.8.1+cu12torch2.9cxx11abiTRUE-cp312-cp312-linux_x86_64.whl",
        "pip install git+https://github.com/huggingface/diffusers",
        "pip install modelscope transformers"
      ]
    }
  ],
  "batch": [
    {
      "name": "ç¯å¢ƒå‡†å¤‡",
      "env_name": "Tongyi-MAI-Z-Image-Turbo",
      "commands":[
        "cp /tmp/Tongyi-MAI-Z-Image-Turbo-generate.py {work_dir}/generate.py",
        "python -c \"import torch;from modelscope import ZImagePipeline;ZImagePipeline.from_pretrained('Tongyi-MAI/Z-Image-Turbo',torch_dtype=torch.bfloat16,low_cpu_mem_usage=False,)\""
      ]
    },
    {
      "name": "å›¾åƒç”Ÿæˆ",
      "env_name": "Tongyi-MAI-Z-Image-Turbo",
      "commands": [
        "cd {work_dir}",
        "rm -rf {server_output_dir}/*",
        "python -c \"import torch; print(f'PyTorchç‰ˆæœ¬: {torch.__version__}'); print(f'CUDAæ˜¯å¦å¯ç”¨: {torch.cuda.is_available()}'); (print(f'CUDAç‰ˆæœ¬: {torch.version.cuda}'), print(f'cuDNNç‰ˆæœ¬: {torch.backends.cudnn.version()}'), print(f'GPUæ•°é‡: {torch.cuda.device_count()}'), [print(f'GPU {i}: {torch.cuda.get_device_name(i)}') for i in range(torch.cuda.device_count())]) if torch.cuda.is_available() else None\"",
        "python ./generate.py --prompt \"{prompt}\" --resolution {resolution} --num {num} --seed {seed} --steps {steps} --output-dir {server_output_dir} --output {server_output_dir}/result.png"
      ]
    }
  ],
  "uploads": [
    {
      "source_path": "Tongyi-MAI-Z-Image-Turbo/generate.py",
      "server_path": "/tmp/Tongyi-MAI-Z-Image-Turbo-generate.py"
    }
  ],
  "endpoint": "echo \"{server_output_dir}\""
}